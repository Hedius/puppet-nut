<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Puppet Class: nut
  
    &mdash; Documentation by YARD 0.9.7
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_classes::nut";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (n)</a> &raquo;
    <span class='title'><span class='object_link'>Puppet Classes</span></span>
     &raquo; 
    <span class="title">nut</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Puppet Class: nut</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>::nut::params</dd>
  </dl>
  
  
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/init.pp
    </dd>
  </dl>
</div>
<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<p>Installs Network UPS Tools (NUT).</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Declaring the class</p>
</div></p>
      
      <pre class="example code"><code>include ::nut</code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Listening on local subnet</p>
</div></p>
      
      <pre class="example code"><code>class { &#39;::nut&#39;:
  listen =&gt; [
    {
      &#39;address&#39; =&gt; $::ipaddress_eth0,
    },
    {
      &#39;address&#39; =&gt; $::ipaddress6_eth0,
    },
  ],
}</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>certfile</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to OpenSSL TLS certificate and key.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>certident</span>
      
      
        <span class='type'>(<tt>Optional[Tuple[String, String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Tuple of certificate name and NSS database password.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>certpath</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to NSS certificate database.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>certrequest</span>
      
      
        <span class='type'>(<tt>Optional[Enum['no', 'request', 'require']]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Client certificate authentication options for NSS.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>client_certident</span>
      
      
        <span class='type'>(<tt>Optional[Tuple[String, String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_certpath</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_certverify</span>
      
      
        <span class='type'>(<tt>Optional[Boolean]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_cmdscript</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_deadtime</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_finaldelay</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_forcessl</span>
      
      
        <span class='type'>(<tt>Optional[Boolean]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_hostsync</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_manage_package</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::client_manage_package</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>If the client is installed with the same package then set this to
<code>false</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>client_manage_service</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::client_manage_service</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>If the client is started as part of the same service as the server then set
this to <code>false</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>client_minsupplies</span>
      
      
        <span class='type'>(<tt>Integer[1]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>1</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_nocommwarntime</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_use_upssched</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_notifycmd</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$client_use_upssched</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_notifyflag</span>
      
      
        <span class='type'>(<tt>Optional[Hash[Nut::Event, Tuple[Boolean, 3, 3]]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_notifymsg</span>
      
      
        <span class='type'>(<tt>Optional[Hash[Nut::Event, String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_package_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::client_package_name</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_pollfreq</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_pollfreqalert</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_rbwarntime</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_service_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::client_service_name</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_shutdowncmd</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::shutdown_command</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>conf_dir</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::conf_dir</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Top-level configuration directory, usually <code>/etc/nut</code> or
<code>/etc/ups</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>driver_packages</span>
      
      
        <span class='type'>(<tt>Hash[String, String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::driver_packages</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Hash of driver types to the package that provides it.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::group</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The unprivileged group used to drop root privileges.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>listen</span>
      
      
        <span class='type'>(<tt>Optional[Array[Nut::Listen, 1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An array of hashes of interface addresses to listen on, optionally with a
port.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>maxage</span>
      
      
        <span class='type'>(<tt>Optional[Integer[1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Timeout for UPS drivers.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>maxconn</span>
      
      
        <span class='type'>(<tt>Optional[Integer[1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Maximum number of connections.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>package_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::server_package_name</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The name of the package.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>service_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::server_service_name</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Name of the service.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>statepath</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::state_dir</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Top-level state directory, usually <code>/var/run/nut</code> or
<code>/var/db/nut</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nut::params::user</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The unprivileged user used to drop root privileges.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="nut_3A_3Aclient.html" title="puppet_classes::nut::client (puppet_class)">::nut::client</a></span></li>
    
      <li><span class='object_link'><a href="../puppet_defined_types/nut_3A_3Aups.html" title="puppet_defined_types::nut::ups (puppet_defined_type)">::nut::ups</a></span></li>
    
      <li><span class='object_link'><a href="../puppet_defined_types/nut_3A_3Auser.html" title="puppet_defined_types::nut::user (puppet_defined_type)">::nut::user</a></span></li>
    
      <li><span class='object_link'><a href="../puppet_defined_types/nut_3A_3Aclient_3A_3Aups.html" title="puppet_defined_types::nut::client::ups (puppet_defined_type)">::nut::client::ups</a></span></li>
    
      <li><span class='object_link'><a href="../puppet_defined_types/nut_3A_3Aclient_3A_3Aupssched.html" title="puppet_defined_types::nut::client::upssched (puppet_defined_type)">::nut::client::upssched</a></span></li>
    
  </ul>

</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/init.pp', line 65</span>

class nut (
  Optional[Stdlib::Absolutepath]                   $certfile              = undef,
  Optional[Tuple[String, String]]                  $certident             = undef,
  Optional[Stdlib::Absolutepath]                   $certpath              = undef,
  Optional[Enum[&#39;no&#39;, &#39;request&#39;, &#39;require&#39;]]       $certrequest           = undef,
  Optional[Tuple[String, String]]                  $client_certident      = undef,
  Optional[Stdlib::Absolutepath]                   $client_certpath       = undef,
  Optional[Boolean]                                $client_certverify     = undef,
  Optional[Stdlib::Absolutepath]                   $client_cmdscript      = undef,
  Optional[Integer[0]]                             $client_deadtime       = undef,
  Optional[Integer[0]]                             $client_finaldelay     = undef,
  Optional[Boolean]                                $client_forcessl       = undef,
  Optional[Integer[0]]                             $client_hostsync       = undef,
  Boolean                                          $client_manage_package = $::nut::params::client_manage_package,
  Boolean                                          $client_manage_service = $::nut::params::client_manage_service,
  Integer[1]                                       $client_minsupplies    = 1,
  Optional[Integer[0]]                             $client_nocommwarntime = undef,
  Boolean                                          $client_use_upssched   = false,
  Optional[Stdlib::Absolutepath]                   $client_notifycmd      = $client_use_upssched ? {
    true    =&gt; $::nut::params::upssched, # lint:ignore:parameter_order
    default =&gt; undef,
  },
  Optional[Hash[Nut::Event, Tuple[Boolean, 3, 3]]] $client_notifyflag     = undef,
  Optional[Hash[Nut::Event, String]]               $client_notifymsg      = undef,
  String                                           $client_package_name   = $::nut::params::client_package_name,
  Optional[Integer[0]]                             $client_pollfreq       = undef,
  Optional[Integer[0]]                             $client_pollfreqalert  = undef,
  Optional[Integer[0]]                             $client_rbwarntime     = undef,
  String                                           $client_service_name   = $::nut::params::client_service_name,
  String                                           $client_shutdowncmd    = $::nut::params::shutdown_command,
  Stdlib::Absolutepath                             $conf_dir              = $::nut::params::conf_dir,
  Hash[String, String]                             $driver_packages       = $::nut::params::driver_packages,
  String                                           $group                 = $::nut::params::group,
  Optional[Array[Nut::Listen, 1]]                  $listen                = undef,
  Optional[Integer[1]]                             $maxage                = undef,
  Optional[Integer[1]]                             $maxconn               = undef,
  String                                           $package_name          = $::nut::params::server_package_name,
  String                                           $service_name          = $::nut::params::server_service_name,
  Stdlib::Absolutepath                             $statepath             = $::nut::params::state_dir,
  String                                           $user                  = $::nut::params::user,
) inherits ::nut::params {

  contain ::nut::install
  contain ::nut::config
  contain ::nut::service

  class { &#39;::nut::common&#39;:
    certident      =&gt; $client_certident,
    certpath       =&gt; $client_certpath,
    certverify     =&gt; $client_certverify,
    cmdscript      =&gt; $client_cmdscript,
    conf_dir       =&gt; $conf_dir,
    deadtime       =&gt; $client_deadtime,
    finaldelay     =&gt; $client_finaldelay,
    forcessl       =&gt; $client_forcessl,
    group          =&gt; $group,
    hostsync       =&gt; $client_hostsync,
    manage_package =&gt; $client_manage_package,
    manage_service =&gt; $client_manage_service,
    minsupplies    =&gt; $client_minsupplies,
    nocommwarntime =&gt; $client_nocommwarntime,
    notifycmd      =&gt; $client_notifycmd,
    notifyflag     =&gt; $client_notifyflag,
    notifymsg      =&gt; $client_notifymsg,
    package_name   =&gt; $client_package_name,
    pollfreq       =&gt; $client_pollfreq,
    pollfreqalert  =&gt; $client_pollfreqalert,
    rbwarntime     =&gt; $client_rbwarntime,
    service_name   =&gt; $client_service_name,
    shutdowncmd    =&gt; $client_shutdowncmd,
    state_dir      =&gt; $statepath,
    use_upssched   =&gt; $client_use_upssched,
    user           =&gt; $user,
  }

  Class[&#39;::nut::install&#39;] -&gt; Class[&#39;::nut::config&#39;] ~&gt; Class[&#39;::nut::service&#39;]

  if $client_manage_service {
    # If the client manages its own service then the client should depend on
    # the server being up
    Class[&#39;::nut::service&#39;] -&gt; Class[&#39;::nut::common&#39;]
  } else {
    # If the server service starts everything up then we need to have the
    # client configured before the service starts
    Class[&#39;::nut::config&#39;] -&gt; Class[&#39;::nut::common&#39;] ~&gt; Class[&#39;::nut::service&#39;]
  }
}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
  Generated on Thu Jan 19 22:32:15 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.7 (ruby-2.2.5).
</div>

    </div>
  </body>
</html>